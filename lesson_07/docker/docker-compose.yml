version: "2"
services:
  zookeeper:
    image: wurstmeister/zookeeper
    container_name: bi_lab_zookeeper
    ports:
      - "2181:2181"
    restart: "no"
  kafka:
    image: wurstmeister/kafka
    container_name: bi_lab_kafka
    ports:
      - "9092:9092"
    restart: "no"
    environment:
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_ADVERTISED_HOST_NAME: localhost
      #KAFKA_LISTENERS: localhost
      KAFKA_MESSAGE_MAX_BYTES: 200000000
      #KAFKA_LISTENERS: localhost #"INTERNAL://:29092,EXTERNAL://:9092"
      #KAFKA_ADVERTISED_LISTENERS: localhost #"INTERNAL://kafka:29092,EXTERNAL://kafka:9092"
      #KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: "INTERNAL:PLAINTEXT,EXTERNAL:PLAINTEXT"
      #KAFKA_INTER_BROKER_LISTENER_NAME: "INTERNAL"
      #KAFKA_ZOOKEEPER_SESSION_TIMEOUT: "6000"
      #KAFKA_RESTART_ATTEMPTS: "10"
      #KAFKA_RESTART_DELAY: "5"
      #ZOOKEEPER_AUTOPURGE_PURGE_INTERVAL: "0"  
  #kafdrop:
  #  image: obsidiandynamics/kafdrop
  #  ports:
  #    - "9000:9000"
  #  depends_on:
  #    - kafka
  #  environment: 
  #    KAFKA_BROKERCONNECT: kafka:9092
  #    JVM_OPTS: "-Xms256M -Xmx512M"
  postgres:
      image: postgres:10
      container_name: bi_lab_pg
      restart: "no"
      environment:
        POSTGRES_DB: test
        POSTGRES_PASSWORD: test
        POSTGRES_USER: test
      ports:
      - "5432:5432"


